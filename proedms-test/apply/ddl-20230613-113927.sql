CREATE SCHEMA IF NOT EXISTS "public";CREATE TABLE "public"."addressss"("id" serial NOT NULL , "created_at123" timestamp, "updated_at" timestamp, "is_deleted" bool, "formatted" varchar NOT NULL , "country" varchar NOT NULL , "city" varchar NOT NULL , "zip_code" varchar, "street" varchar, "street_no" varchar, "latitude" float8 NOT NULL , "longitude" float8 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."bid"("updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "duration_hours" float8, "price" float8 NOT NULL , "available_from" timestamp NOT NULL , "accepted" bool, "order_id" uuid NOT NULL , "supplier_id" int4 NOT NULL , "smart_choice_stats_id" uuid, "notes" varchar, "duration_days" int4, "created_by" int4 NOT NULL , "time_to_arrive" float8, "attachment" varchar, "vat" float8, "waiting_time_type" varchar, "created_at3434" timestamp, PRIMARY KEY ("id"));CREATE TABLE "public"."bid_description"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "bid_id" uuid NOT NULL , "description" varchar NOT NULL , "price" float8 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."bonus_bill"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "YEAR" int4 NOT NULL , "MONTH" int4 NOT NULL , "pm_id" int4 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."category"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "name" varchar NOT NULL , "type" _varchar NOT NULL , "tags" _varchar, PRIMARY KEY ("id"));CREATE TABLE "public"."company"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "name" varchar NOT NULL , "email" varchar NOT NULL , "phone" varchar NOT NULL , "NIF" varchar NOT NULL , "avatar" varchar, "is_verified" bool, "type" varchar NOT NULL , "address_id" int4 NOT NULL , "payment_method_id" int4, "range" int4, "is_24_hours" bool, "trusted_suppliers" _int4, "invitation_link_id" uuid, "notification_preferences" json, "accept_bonus" bool, "languages" varchar, PRIMARY KEY ("id"));CREATE TABLE "public"."daily_status"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "order_id" uuid, "images" _varchar, "documents" _varchar, "status" varchar, PRIMARY KEY ("id"));CREATE TABLE "public"."hazzlo_invoice"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "YEAR" int4 NOT NULL , "MONTH" int4 NOT NULL , "supplier_id" int4 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."invoice_description"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "invoice_id" uuid NOT NULL , "description" varchar NOT NULL , "price" float8 NOT NULL , "quantity" float8, PRIMARY KEY ("id"));CREATE TABLE "public"."invoices"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "order_id" uuid NOT NULL , "sender_id" int4 NOT NULL , "receiver_id" int4 NOT NULL , "amount" float8 NOT NULL , "invoice_number" varchar NOT NULL , "is_paid" bool, "is_external" bool, "external_id" int4, "external_link" varchar, "VAT" float8, PRIMARY KEY ("id"));CREATE TABLE "public"."join_requests"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "user_id" int4 NOT NULL , "company_id" int4 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."logger"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "description" varchar NOT NULL , "is_reviewed" bool, PRIMARY KEY ("id"));CREATE TABLE "public"."message"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "order_id" uuid NOT NULL , "message" varchar(1000) NOT NULL , "is_read" bool, "sender_id" int4 NOT NULL , "company_id" int4 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."notification"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "order_id" uuid, "property_id" int4, "notified_company_id" int4, "notified_user_id" int4, "severity" varchar, "message" varchar NOT NULL , "message_es" varchar NOT NULL , "is_read_by_company" bool, "is_read_by_user" bool, "info_duration" int4, "type" varchar, PRIMARY KEY ("id"));CREATE TABLE "public"."order"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "created_by" int4, "name" varchar NOT NULL , "description" varchar NOT NULL , "time_to_receive_bids" timestamp, "property_id" int4 NOT NULL , "category_id" int4 NOT NULL , "images" _varchar, "tags" _varchar, "status" varchar NOT NULL , "assigned_supplier_id" int4, "assigned_team_member_id" int4, "daily_status_notification" bool, "is_ready_notification" bool, "manager_id" int4 NOT NULL , "type" varchar NOT NULL , "preferences_id" int4, "contact" _varchar, "documents" _varchar, "work_finished" bool, "hazzlo_invoice_id" uuid, "bonus_bill_id" uuid, "review_id" uuid, PRIMARY KEY ("id"));CREATE TABLE "public"."payment_method"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "IBAN" varchar, "PayPal" varchar, PRIMARY KEY ("id"));CREATE TABLE "public"."possible_suppliers"("order_id" uuid, "supplier_id" int4);CREATE TABLE "public"."preferences"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "languages" _varchar, "price_weight" int4, "rating_weight" int4, "start_time_weight" int4, "languages_weight" int4, PRIMARY KEY ("id"));CREATE TABLE "public"."property"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "CIF" varchar NOT NULL , "name" varchar NOT NULL , "description" varchar, "email" varchar, "phone" varchar, "images" _varchar, "address_id" int4 NOT NULL , "manager_id" int4 NOT NULL , "contact" _varchar, "accept_bonus" bool, PRIMARY KEY ("id"));CREATE TABLE "public"."review"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "supplier_id" int4, "reviewer_id" int4, "comment" varchar, "rating" int4 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."smart_choice_stats"("created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "id" uuid NOT NULL , "ranking" int4 NOT NULL , "price" float8 NOT NULL , "time" float8 NOT NULL , "languages" float8 NOT NULL , "rating" float8 NOT NULL , "total_bids" int4 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."supplier_categories"("category_id" int4, "company_id" int4);CREATE TABLE "public"."team_member"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "user_id" int4 NOT NULL , "company_id" int4 NOT NULL , "is_owner" bool, "is_manager" bool, "permissions" varchar, PRIMARY KEY ("id"));CREATE TABLE "public"."user"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "name" varchar NOT NULL , "surname" varchar NOT NULL , "email" varchar NOT NULL , "phone" varchar NOT NULL , "password" varchar NOT NULL , "avatar" varchar, "email_confirmed_at" timestamp, "phone_confirmed_at" timestamp, "phone_verification_sent_at" timestamp, "email_verification_sent_at" timestamp, "confirmed_email" bool, "confirmed_phone" bool, "login_times" int4, "last_login" timestamp, "role" varchar, "address_id" int4 NOT NULL , PRIMARY KEY ("id"));CREATE TABLE "public"."user_activity"("id" serial NOT NULL , "created_at" timestamp, "updated_at" timestamp, "is_deleted" bool, "user_id" int4 NOT NULL , "status" varchar NOT NULL , PRIMARY KEY ("id"));ALTER TABLE "public"."bid" ADD CONSTRAINT bid_order_id_fkey FOREIGN KEY ("order_id") REFERENCES  "public"."order"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."bid" ADD CONSTRAINT bid_supplier_id_fkey FOREIGN KEY ("supplier_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."bid" ADD CONSTRAINT bid_smart_choice_stats_id_fkey FOREIGN KEY ("smart_choice_stats_id") REFERENCES  "public"."smart_choice_stats"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."bid" ADD CONSTRAINT bid_created_by_fkey FOREIGN KEY ("created_by") REFERENCES  "public"."user"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."bid_description" ADD CONSTRAINT bid_description_bid_id_fkey FOREIGN KEY ("bid_id") REFERENCES  "public"."bid"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."bonus_bill" ADD CONSTRAINT bonus_bill_pm_id_fkey FOREIGN KEY ("pm_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."company" ADD CONSTRAINT company_payment_method_id_fkey FOREIGN KEY ("payment_method_id") REFERENCES  "public"."payment_method"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."daily_status" ADD CONSTRAINT daily_status_order_id_fkey FOREIGN KEY ("order_id") REFERENCES  "public"."order"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."hazzlo_invoice" ADD CONSTRAINT hazzlo_invoice_supplier_id_fkey FOREIGN KEY ("supplier_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."invoice_description" ADD CONSTRAINT invoice_description_invoice_id_fkey FOREIGN KEY ("invoice_id") REFERENCES  "public"."invoices"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."invoices" ADD CONSTRAINT invoices_order_id_fkey FOREIGN KEY ("order_id") REFERENCES  "public"."order"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."invoices" ADD CONSTRAINT invoices_sender_id_fkey FOREIGN KEY ("sender_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."invoices" ADD CONSTRAINT invoices_receiver_id_fkey FOREIGN KEY ("receiver_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."join_requests" ADD CONSTRAINT join_requests_user_id_fkey FOREIGN KEY ("user_id") REFERENCES  "public"."user"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."join_requests" ADD CONSTRAINT join_requests_company_id_fkey FOREIGN KEY ("company_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."message" ADD CONSTRAINT message_order_id_fkey FOREIGN KEY ("order_id") REFERENCES  "public"."order"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."message" ADD CONSTRAINT message_sender_id_fkey FOREIGN KEY ("sender_id") REFERENCES  "public"."user"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."message" ADD CONSTRAINT message_company_id_fkey FOREIGN KEY ("company_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."notification" ADD CONSTRAINT notification_order_id_fkey FOREIGN KEY ("order_id") REFERENCES  "public"."order"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."notification" ADD CONSTRAINT notification_property_id_fkey FOREIGN KEY ("property_id") REFERENCES  "public"."property"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."notification" ADD CONSTRAINT notification_notified_company_id_fkey FOREIGN KEY ("notified_company_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."notification" ADD CONSTRAINT notification_notified_user_id_fkey FOREIGN KEY ("notified_user_id") REFERENCES  "public"."user"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_created_by_fkey FOREIGN KEY ("created_by") REFERENCES  "public"."user"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_property_id_fkey FOREIGN KEY ("property_id") REFERENCES  "public"."property"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_category_id_fkey FOREIGN KEY ("category_id") REFERENCES  "public"."category"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_assigned_supplier_id_fkey FOREIGN KEY ("assigned_supplier_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_assigned_team_member_id_fkey FOREIGN KEY ("assigned_team_member_id") REFERENCES  "public"."team_member"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_manager_id_fkey FOREIGN KEY ("manager_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_preferences_id_fkey FOREIGN KEY ("preferences_id") REFERENCES  "public"."preferences"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_hazzlo_invoice_id_fkey FOREIGN KEY ("hazzlo_invoice_id") REFERENCES  "public"."hazzlo_invoice"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_bonus_bill_id_fkey FOREIGN KEY ("bonus_bill_id") REFERENCES  "public"."bonus_bill"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."order" ADD CONSTRAINT order_review_id_fkey FOREIGN KEY ("review_id") REFERENCES  "public"."review"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."possible_suppliers" ADD CONSTRAINT possible_suppliers_order_id_fkey FOREIGN KEY ("order_id") REFERENCES  "public"."order"("id") ON DELETE CASCADE ;ALTER TABLE "public"."possible_suppliers" ADD CONSTRAINT possible_suppliers_supplier_id_fkey FOREIGN KEY ("supplier_id") REFERENCES  "public"."company"("id") ON DELETE CASCADE ;ALTER TABLE "public"."property" ADD CONSTRAINT property_manager_id_fkey FOREIGN KEY ("manager_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."review" ADD CONSTRAINT review_supplier_id_fkey FOREIGN KEY ("supplier_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."review" ADD CONSTRAINT review_reviewer_id_fkey FOREIGN KEY ("reviewer_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."supplier_categories" ADD CONSTRAINT supplier_categories_category_id_fkey FOREIGN KEY ("category_id") REFERENCES  "public"."category"("id") ON DELETE CASCADE ;ALTER TABLE "public"."supplier_categories" ADD CONSTRAINT supplier_categories_company_id_fkey FOREIGN KEY ("company_id") REFERENCES  "public"."company"("id") ON DELETE CASCADE ;ALTER TABLE "public"."team_member" ADD CONSTRAINT team_member_user_id_fkey FOREIGN KEY ("user_id") REFERENCES  "public"."user"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."team_member" ADD CONSTRAINT team_member_company_id_fkey FOREIGN KEY ("company_id") REFERENCES  "public"."company"("id") ON DELETE NO ACTION ;ALTER TABLE "public"."user_activity" ADD CONSTRAINT user_activity_user_id_fkey FOREIGN KEY ("user_id") REFERENCES  "public"."user"("id") ON DELETE NO ACTION ;